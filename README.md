# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ–ø–ª–∞—Ç–µ InSales

–í–µ–±-—Å–µ—Ä–≤–∏—Å –∏ Telegram-–±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ InSales. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞—Ç—É `paid_till` –¥–ª—è –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ –∏ –∑–∞ 7 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
–≤ Telegram. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω–æ–µ –º–µ–Ω—é: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤,
–¥–∞—Ç—ã –æ–ø–ª–∞—Ç, –¥–æ–±–∞–≤–ª—è—Ç—å –º–∞–≥–∞–∑–∏–Ω—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏, –∞ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, –∫–æ–º—É –¥–æ—Å—Ç—É–ø–Ω–æ –º–µ–Ω—é.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ InSales –ø–æ API (–¥–æ–º–µ–Ω, API key, –ø–∞—Ä–æ–ª—å).
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ API.
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –∑–∞ 7 –¥–Ω–µ–π –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –∏ –≤ –¥–µ–Ω—å –æ–∫–æ–Ω—á–∞–Ω–∏—è.
- –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–∞: —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –º–µ–Ω—é, –∞ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω (–∑–∞–¥–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏) —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –∞–¥–º–∏–Ω–æ–≤.
- –ú–µ–Ω—é Telegram-–±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.
- REST endpoint `/health` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- –ê–∫–∫–∞—É–Ω—Ç Telegram –∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)).
- –î–æ—Å—Ç—É–ø –∫ API InSales (–∫–ª—é—á –∏ –ø–∞—Ä–æ–ª—å) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` (–ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```
TELEGRAM_BOT_TOKEN="<—Ç–æ–∫–µ–Ω –±–æ—Ç–∞>"
TELEGRAM_SUPER_ADMIN_ID="<chat_id —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞>"
DATABASE_URL="sqlite+aiosqlite:///./data/database.db"
NOTIFICATION_TIME="09:00"  # –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —Ñ–æ—Ä–º–∞—Ç HH:MM
TIMEZONE="Europe/Moscow"   # –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
```

> –ó–Ω–∞—á–µ–Ω–∏—è `NOTIFICATION_TIME` –∏ `TIMEZONE` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ 09:00 UTC.
> –ü–æ–ª—É—á–∏—Ç—å `TELEGRAM_SUPER_ADMIN_ID` –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) –∏–ª–∏ –∏–∑ –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã `/start`.

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start` –≤–∞—à–µ–º—É –±–æ—Ç—É, —á—Ç–æ–±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç –∏ –ø–æ–ª—É—á–∏—Ç—å –º–µ–Ω—é.

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

- –°—É–ø–µ—Ä–∞–¥–º–∏–Ω–æ–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å chat_id, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `TELEGRAM_SUPER_ADMIN_ID`. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã `/start`.
- –¢–æ–ª—å–∫–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω –≤–∏–¥–∏—Ç –ø—É–Ω–∫—Ç –º–µ–Ω—é ¬´üõ° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏¬ª –∏ –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å/–æ—Ç–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞ –¥–ª—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –±–æ—Ç–∞ –∏ –≤–∏–¥—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ—Å—Ç—É–ø —É —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞.

## Docker

–°–µ—Ä–≤–∏—Å –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–∞ Ubuntu VPS. –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker build -t insales-monitor .
docker run -d \
  --name insales-monitor \
  -p 8000:8000 \
  --env-file .env \
  -v $(pwd)/data:/app/data \
  insales-monitor
```

–¢–æ–º `data` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–∑—ã SQLite —Å –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –∏ —á–∞—Ç–∞–º–∏ Telegram.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
‚îú‚îÄ‚îÄ models.py            # SQLAlchemy-–º–æ–¥–µ–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ —á–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ repositories.py      # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îú‚îÄ‚îÄ scheduler.py         # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (APScheduler)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ insales.py       # –ö–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API InSales
‚îÇ   ‚îî‚îÄ‚îÄ notifier.py      # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ telegram_bot/
    ‚îî‚îÄ‚îÄ bot.py           # –•–µ–Ω–¥–ª–µ—Ä—ã Telegram-–±–æ—Ç–∞ –∏ –º–µ–Ω—é
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤—Ä—É—á–Ω—É—é:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram-–±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/start`.
3. –î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ –º–µ–Ω—é –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.
4. –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É –æ–ø–ª–∞—Ç—ã –≤ InSales –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —Å–æ–≥–ª–∞—Å–Ω–æ –≥—Ä–∞—Ñ–∏–∫—É.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å SQLite –Ω–∞ –¥—Ä—É–≥—É—é –°–£–ë–î, —É–∫–∞–∑–∞–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `DATABASE_URL`.
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏–∑ `TIMEZONE`; —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏–º—è –∏–∑ –±–∞–∑—ã IANA (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Europe/Moscow`).
